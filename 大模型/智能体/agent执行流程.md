---
标题: agent执行流程
链接: https://mp.weixin.qq.com/s/kLYSG4de3nIKiloVSvg05w?scene=1
作者: "[[冷逸]]"
创建时间: 2025-04-22T12:26:45+08:00
摘要: agent迭代范式
tags:
  - "#agent"
  - "#执行流程"
字数: "393"
状态: 未开始
---

Agent工程也有一个迭代的范式:

1. **梳理流程:** 梳理工作流程SOP, 并拆解成多个单一「任务」和多个「任务执行流程」.
    
2. **「任务」工具化:** 自动化每一个「任务」, 形成一系列的小工具, 让机器能完成每一个单一任务.
    
3. **建立规划:** 串联工具, 基于agent框架让bot来规划「任务执行流程」.
    
4. **迭代优化:** 不停迭代优化「任务」工具和「任务执行流程」规划, 造就能应对实际场景的Agent.


---
## 详细解释
这段话非常精辟地概括了构建和优化人工智能代理（Agent）的系统性方法论，它借鉴了传统软件工程的成熟经验，并将其应用于新兴的 Agent 工程领域。我们可以这样来理解：

**核心思想：** 构建一个能干的 Agent 并非一蹴而就，而是需要一个结构化、模块化、不断迭代的过程。这个过程强调先理解清楚要做什么，然后将复杂问题分解为小单元，为每个小单元找到自动化方案，再智能地将这些方案组合起来，最后通过实践不断打磨。

让我们逐条拆解：

1. **梳理流程 (SOP & Task Decomposition):**
    
    - **原文：** 梳理工作流程SOP, 并拆解成多个单一「任务」和多个「任务执行流程」。
    - **理解：**
        - **梳理工作流程SOP (Standard Operating Procedure):** 这是起点。在构建 Agent 之前，首先要非常清晰地了解 Agent 需要完成的整个工作流程是怎样的。如果这个流程是人类已经在执行的，那么就要把人类的工作步骤、决策点、所需信息等标准化、条理化，形成一个标准作业程序。
        - **拆解成多个单一「任务」:** 将这个大的工作流程分解成一系列更小、更具体的、可独立执行的子任务。每个子任务都应该是相对独立的，有明确的输入和输出。例如，一个“客服 Agent”的工作流程可能被拆解为：“理解用户问题”、“查询知识库”、“生成回答”、“记录交互”等单一任务。
        - **和多个「任务执行流程」:** 这指的是这些单一任务之间是如何串联、组合起来以完成一个更宏观目标的。可能存在多种不同的任务组合方式（流程）来应对不同的情况或达成不同的子目标。例如，简单问题可能只需要“理解->生成回答”，复杂问题则需要“理解->查询知识库->综合信息->生成回答->请求确认”。
2. **「任务」工具化 (Task Automation as Tools):**
    
    - **原文：** 自动化每一个「任务」, 形成一系列的小工具, 让机器能完成每一个单一任务。
    - **理解：**
        - **自动化每一个「任务」:** 针对上一步拆解出来的每一个单一任务，开发或找到一种方法让机器（Agent）能够自动完成它。
        - **形成一系列的小工具:** 这些自动化方案就变成了一个个“工具”。这些“工具”可以是：
            - 一段特定的代码（如 Python 脚本）
            - 一个 API 调用（如查询天气 API、翻译 API）
            - 一个训练好的小型专用模型
            - 一个精心设计的提示（Prompt）模板，交给大型语言模型（LLM）去执行特定子任务
            - 与外部软件或数据库的交互接口
        - **让机器能完成每一个单一任务:** 目标是让 Agent 拥有执行这些基础操作的能力。此时，Agent 还只是掌握了“点”上的能力，就像一个人学会了使用锤子、螺丝刀等不同工具。
3. **建立规划 (Planning & Tool Orchestration):**
    
    - **原文：** 串联工具, 基于agent框架让bot来规划「任务执行流程」。
    - **理解：**
        - **串联工具:** 有了各种“小工具”后，现在需要将它们有效地组合起来，以执行在第一步中定义的“任务执行流程”。
        - **基于agent框架:** Agent 框架（例如 LangChain, AutoGen, Coze 的工作流等）提供了核心的智能和调度能力。这些框架通常包含大型语言模型 (LLM) 作为“大脑”。
        - **让bot来规划「任务执行流程」:** 关键在于“规划”。Agent 不仅仅是机械地按预设顺序执行工具，更高级的 Agent 能够根据当前的目标、上下文信息、可用工具以及环境反馈，动态地决定应该使用哪个工具、以什么顺序使用、如何传递参数等。这就是 Agent 的自主性和智能性的体现。它需要理解目标，然后像一个项目经理一样，调用合适的“工具”（任务执行单元）来一步步完成工作。
4. **迭代优化 (Iterative Refinement):**
    
    - **原文：** 不停迭代优化「任务」工具和「任务执行流程」规划, 造就能应对实际场景的Agent。
    - **理解：**
        - **不停迭代优化:** 这强调了 Agent 开发是一个持续改进的过程，与软件工程的敏捷开发思想类似。第一次构建的 Agent 可能并不完美。
        - **优化「任务」工具:** 可能发现某个小工具不够高效、不够准确，或者需要新的工具来应对新的情况。就需要改进现有工具或开发新工具。
        - **优化「任务执行流程」规划:** 可能发现 Agent 在某些情况下规划的流程不是最优的，或者无法处理某些边界情况。这就需要调整 Agent 的规划逻辑、决策策略，甚至重新审视第一步的流程梳理和任务拆解是否合理。
        - **造就能应对实际场景的Agent:** 最终目标是让 Agent 能够真正解决现实世界中的复杂问题，具有鲁棒性（Robustness）和适应性（Adaptability）。这需要通过不断的测试、收集反馈、分析失败案例，然后回头去优化前面的各个环节。

**总结一下，这个范式可以理解为：**

- **先搞清楚“做什么”和“怎么分工” (梳理流程)。**
- **然后为每个“分工”打造专门的“武器装备” (任务工具化)。**
- **接着训练一个聪明的“指挥官”（Agent大脑），让它知道在不同战况下如何调兵遣将、组合使用这些“武器装备” (建立规划)。**
- **最后，在实战演练中不断磨合，升级“武器装备”，提升“指挥官”的指挥艺术，直到能打胜仗 (迭代优化)。**

这种方法论对于构建复杂的、能够自主完成多步骤任务的 Agent 至关重要，它提供了一个从需求分析到最终实现和持续改进的清晰路径。